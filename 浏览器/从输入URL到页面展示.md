![流程图](https://static001.geekbang.org/resource/image/92/5d/92d73c75308e50d5c06ad44612bcb45d.png)

从上述流程图中，URL 输入到页面展示，需要`浏览器主进程`，`网络进程`，`渲染进程`互相配合

1. `浏览器主进程`接受用户 URL 输入
2. `网络进程`对 URL 发起请求
3. `渲染进程`进行页面渲染

### 1. URL 输入

- 如果是合法的 URL，则向`网络进程`发送 URL 请求。
- 如果是搜索条件,则使用默认的搜索引擎，拼接输入内容，组成完整的 URL，向`网络进程`发送请求。

### 2. 网络请求

- 首先进行 DNS(Domain Name System)解析

  1. 检查本地 host 文件，是否有域名对应的 IP
  2. 如果 host 没有，检查本地 DNS 解析缓存，是否有域名对应的 IP
  3. 如果本地没有，就从 DNS 服务器（本地服务器，上级服务器，..., 根服务器）

- DNS 解析，获取 IP 地址
- 在向服务器发送请求之前，会检查本地是否缓存过该资源(`disk cache`和`memory cache`)
- 如果本地没有缓存，则向服务器发送请求。
- 服务器接受到请求信息，开始返回数据

  1. 先检查数据是否有强缓存 (`no-control` > `expires`)
  2. 再检查数据是否有协商缓存 (`Etag(req)/If-none-match(res)`, `Last-modify(req)/If-Modify-Since(res)`)
  3. 有缓存，返回缓存数据，http code = 304.
  4. 没有缓存，则重新请求资源

### 3. 页面渲染前奏

- 将网络请求返回的数据，交给`浏览器主进程`
- 根据响应头，`content-type`类型，浏览器做出不同的操作
- 如果是下载类型（`application/octet-stream`等字节流类型），提交给浏览器`下载管理器`，终止渲染
- 如果是 HTML(`text/html`)，则将数据传给`渲染进程`，同时检查所有的`渲染进程`是否有相同的域名，如果有，共用一个渲染进程。如果没有，新建一个渲染进程

### 4. 页面渲染
