# 进程和线程

## 浏览器进程

> 以 Chrome 为例

1. 1 个浏览器主进程
2. 1 个 GPU 进程
3. 1 个网络进程
4. 多个插件进程
5. 多个渲染进程(每个 非 same-site 的 tab，就是一个渲染进程)

## 概念

1. 进程

   > 启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。

2. 线程

   > 存在于进程中，执行代码的环境

3. 类比

- 进程 --> 工厂 、 线程 --> 流水线

  - 造车(`运行程序`)时，在土地(`系统`)上开辟一个地(`内存`)建立工厂(`进程`)
  - 工厂决定需要用到多少条流水线(`线程`),流水线越多(`多线程`)，效率越快
  - 所有的流水线，可以使用和增删工厂中所有的材料(`线程之间能共享进程的数据，也能操作数据`)
  - 一条流水线出事了(`线程出错`)，导致供应链断了，结果工厂倒闭(`进程崩溃`)
  - 当工厂关闭时，工厂被爆破移除(`进程结束时，系统收回内存`)
  - 通常来说，所有的工厂封闭管理，不对外开放(`进程之间没有联系`)
  - 老板之间有关系的话，工厂和工厂可以进行合作(`IPC机制`)

## 特点

1. 运行程序时，系统会创建内存，用于存放进程
2. 进程中使用线程，线程越多，效率越快
3. 线程之间可以共享进程的数据，同时也可以修改数据
4. 线程执行错误会导致进程崩溃
5.  进程结束，系统收回内存
6. 通常，进程之间无法通信。可以使用 IPC 机制，使进程之间通信

## 多进程架构

1. 安全

进程之间数据不共享

2. 稳定

一个进程卡死，不会导致整个主进程卡死

3. 流畅

进程之间同步运行，不会存在进程阻塞

4. 更占内存
